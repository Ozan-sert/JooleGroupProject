@model JooleGroupProject.UI.Models.SearchResultVM

@{
    ViewBag.Title = "SearchResult";
}

@{
    Layout = null;
}
<head>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <link href="~/Content/searchResult.css" rel="stylesheet" />
</head>
<div>Header</div>


<div class="row">
    <div class="col-3 filter">
        <!-- Filter section goes here -->
        <div class="filter-item row ">
            <div class="col-5 d-flex justify-content-center align-items-center p-2">
                <p>Search:</p>
            </div>
            <div class="col-3 d-flex justify-content-center align-items-center  p-2">
                <button>
                    Save
                </button>
            </div>
            <div class="col-4 d-flex justify-content-center align-items-center p-2">
                <button>
                    Clear
                </button>
            </div>
        </div>
        <div class="filter-item row">
            <div class="col-6 d-flex justify-content-center align-items-center p-2" style="border-right:1px solid gray;"><p>Product</p></div>
            <div class="col-6 d-flex justify-content-center align-items-center p-2"><p>Project</p></div>
        </div>
        <div class="filter-item row clickable" id="product-type">

            <div class="col-9 d-flex justify-content-start align-items-center" style="padding-left:20px;"> <p>Product Type</p></div>
            <div class="col-3 p-2 d-flex justify-content-center align-items-center"> <i class="fas fa-caret-down fa-2x"></i></div>
        </div>

        <div class="filter-toggle justify-content-between" id="model-year" style="display:flex;">
            <div class="col-4  d-flex justify-content-center align-items-center "><p>Model year:</p></div>

            <div class="col-3  d-flex justify-content-center align-items-center p-2"><input type="text"></div>
            <div class="col-2  d-flex justify-content-center align-items-center "><p>—</p></div>
            <div class="col-3  d-flex justify-content-center align-items-center p-2"><input type="text"></div>
        </div>

        <div class="filter-item row clickable " id="product-tech" style="border-top:1px solid gray;">
            <div class="col-9 d-flex justify-content-start align-items-center" style="padding-left:20px;"> <p>Tech Specifications</p></div>
            <div class="col-3 p-2 d-flex justify-content-center align-items-center"> <i class="fas fa-caret-down fa-2x"></i></div>
        </div>

        <div id="tech-spec">

            @if (Model != null)
            {
                var techSpecList = Model.techSpecFilters;
                int i = 0;
                foreach (var filter in techSpecList)
                {
                    <div class="slider-label row">
                        <div class="col-3 py-3 d-flex justify-content-center align-items-center">
                            <i class="fa-solid fa-right-left"></i>
                        </div>
                        <div class="col-9 d-flex justify-content-start align-items-center" style="padding-left:0px;">
                            <p>@filter.AttributeName</p>
                        </div>

                    </div>

                    <div class="slider row d-flex align-items-center">
                        <div class="col-3  py-1">
                            <input type="text" id="a_@i" readonly>
                        </div>
                        <div class="slider-item col-6 d-flex justify-content-center align-items-center" style="padding-left:20px;" id="slider-range_@i" data-min="@filter.MinValue" data-max="@filter.MaxValue"></div>
                        <div class="col-3 py-1">
                            <input type="text" id="b_@i" readonly>
                        </div>
                    </div>
                    i++;
                }
            }

        </div>
    </div>
    <div class="col-9">
        <!-- Products list goes here -->
        @if (Model != null)
        {
            <div><p><strong>@Model.CategoryName > </strong>@Model.SubCategoryName</p></div>
            <div class="row">
                @{ 
                    var productList = Model.Products;
                    foreach(var product in productList)
                {
                    <div class="col-3 table-bordered text-center">
                        <img id="pimg_@product.ProductID"/>
                    </div>
                }
                }
            </div>
         }
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://kit.fontawesome.com/ada9f89ebf.js" crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {
        $('#product-type').click(function () {
            $('#model-year').toggle();

            if($('#model-year').css('display') == 'none')
            {
                $('#product-type').css('border-bottom', 'none');
            }
            else
            {
                $('#product-type').css('border-bottom', '1px solid gray');
            }
        });
        $('#product-tech').click(function () {
            $('#tech-spec').toggle();
            if ($('#tech-spec').css('display') == 'none') {
                $('#product-tech').css('border-bottom', 'none');
            }
            else {
                $('#product-tech').css('border-bottom', '1px solid gray');
            }
        })
        $(function () {
            var cnt = @Model.techSpecFilters.Count();
            for (var i = 0; i < cnt; i++) {
                createSlider(i);
            }
        });
        function createSlider(i) {
            var minValue = parseInt($("#slider-range_" + i).data('min'));
            var maxValue = parseInt($("#slider-range_" + i).data('max'));
            $("#slider-range_" + i).slider({
                range: true,
                min: minValue,
                max: maxValue,
                values: [minValue, maxValue],
                slide: function (event, ui) {
                    $("#a_" + i).val(ui.values[0]);
                    $("#b_" + i).val(ui.values[1]);
                }
            });
            $('#a_' + i).val(minValue);
            $('#b_' + i).val(maxValue);
        }
    });




</script>